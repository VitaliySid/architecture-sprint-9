### <a name="_b7urdng99y53"></a>**Название задачи: Открытие депозитов онлайн** 
### <a name="_hjk0fkfyohdk"></a>**Автор: Сидоренко ВА**
### <a name="_uanumrh8zrui"></a>**Дата: 19.05.2025**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**
Опишите здесь верхнеуровневые Use Cases. Их нужно оформить в виде таблицы с пошаговым описанием:

|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|   1   | Новый клиент, сайт                               | Отображение на сайте списка доступных депозитов с актуальными ставками для нового клиента                                            |                                                                                                            |
|   2   | Новый клиент, сайт, сервис заявок               | Возможность для нового клиента подать заявку на депозит, оставив свой номер телефона и ФИО                                           | 1. Новый клиент заполняет и отправляет форму на сайте  <br>  2. Сформированная заявка сохраняется в сервисе           |
|   3   | Новый клиент, менеджер по депозитам, сервис заявок, интернет банк для сотрудников, АБС | Заявка на депозит для нового клиента должна попадать к менеджеру. Изучив заявку, менеджер может предложить особые условия | 1. Менеджер изучает заявку и подбирает условия исходя из текущей ставки ЦБ  <br>  2. Менеджер связывается с клиентом и озвучивает условия  |
|   4   | Новый клиент, менеджер фронт-офиса, АБС шлюз, АБС API                      | Передача документов клиентов в систему АБС банка                                                                     |     1. Клиент приходит в офис для подтверждения личности <br> 2. Менеджер фронт-офиса копирует документы и отправляет из в АБС по защифрованному каналу                                                                                                       |
|   5   | Клиент банка, интернет-банк , шлюз АБС, сервис ставок                  | В интернет-банке клиент видит список доступных депозитов с актуальными ставками и персонализированные ставки                         |                     1. Клиент открывет страницу интернет-банка <br> 2. Интернет-банк запрашивает данные о актуальных ставках (получает из кеша) в шлюзе АБС <br> 3. Интернет-банк отображает информацию о доступных депозитах с учетом актуальных ставок и истории клиента                                                                                    |
|   6   | Клиент банка, интернет-банк, сервис заявок ,шлюз АБС, СМС шлюз, оператор телеком       | Указав счёт и сумму депозита, клиент может подать заявку на открытие депозита. Операцию в интернет-банке необходимо подтвердить с помощью СМС-кода.                                                       | 1. Клиент заполняет и отправляет форму в интернет-банке . <br> 2. Интернет-банк создаёт заявку в сервисе заявок. <br> 3. Интернет-банк отправляет клиенту СМС для подтверждения создания заявки. <br> 4. Клиент в интернет-банке вводит код, полученный в СМС. <br> 5. Менеджерам бэк-офиса становится видна новая заявки                                              |
|   7   | Менеджер отдела депозитов, интернет-банк, АБС шлюз, сервис заявок, смс шлюз, телеком оператор           | Реализовать бизнес-функционал ведения ставок по депозитам и бизнес-функционал текущего процесса согласования ставки по заявке.Клиент должен получить СМС-уведомления после подтверждения размера ставки и открытия депозита                                                                           | 1. Менеджер отдела депозитов обрабатывает новую заявку на депозит в интернет-банке и делает индивидуальное предложение по заявке. <br> 2. Менеджер отдела депозитов вносит индивидуальную ставку в заявку и отправляет ставку на согласование в АБС шлюз. <br> 3. Менеджер бек-офиса согласовывает индивидуальную ставку. <br> 4. Менеджер отдела депозитов получает одобрение в интернет-банке от АБС и делает предложение клиенту.   <br> **На текущий момент получение ставок и согласований персональных предложений синхронное, но заложено использование брокера сообщений `kafka`**                                     |

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Опишите здесь нефункциональные требования и архитектурно-значимые требования.

|**№**|**Требование**|
| :-: | :- |
| **U**   | **Удобство использования** (Usability)                                                                            |              |
| U1  | Бизнес ожидает, что интерфейс работы будет максимально удобным для клиента                                    |
| U2  | Отклик по всем операциям должен быть максимально быстрым и занимать миллисекунды.                             | 
| U3  | Нужно придерживаться системы дизайна для приложений, которая принята в компании                               | 
| **R**   | **Надёжность (Reliability)**                                                                                      |              |
| R1  | Все сервисы должны работать 24/7 и быть доступны в 99,9% случаев                                              | 
| R2  | В случае сбоев в ЦОД необходимо, чтобы сервисы интернет-банка были доступны и выдерживали требуемую нагрузку  | 
| R3  | Предусмотреть равномерное горизонтальное масштабирование и распределение запросов между серверами, приложениями и ЦОД  |  
| **P**   | **Производительность (Performance)**                                                                              |              |
| P1  | Отклик по всем операциям должен быть максимально быстрым и занимать миллисекунды.                             |  
| **S**   | **Поддерживаемость (Supportability)**                                                                             |              |
| S1  | Разработка документации для дальнейшего расширения системы                                                    |   
| S2  | При использовании новых технологий они должны быть совместимы с существующими платформами разработки и внутри банка уже была экспертиза на уровне языков программирования                                                                                     |  
| **+R**  | **+ Ограничения (Restricitions)**                                                                                 |              |
| +R1 | Рекомендации к использованию баз данных MS SQL и Oracle                                                       |     
| +R2 | При использовании новых технологий они должны быть совместимы с существующими платформами разработки и внутри банка уже была экспертиза на уровне языков программирования. Предпочтительные технологии: ASP.NET MVC 4.5 на основе .NET Framework 4.5, Delphi, PHP, React.js, Java Spring Boot                                                                                     |     
| +R3 | Рекомендации к использованию Kafka в качестве брокера сообщений                                               | 
| +R4 | Рекомендации к переводу интернет-банка на микросервисную архитектуру                                          |  
| +R5 | Рекомендации избежать прямой работы интернет-банка с API АБС в новом процессе                                 |   
| +R6 | Из-за базы данных АБС может масштабироваться только вертикально                                               |       
| +R7 | Необходимо использовать шифрование при работе с чувствительной информацией                                    |       
| +R8 | Требует избежать доработки со стороны подрядчика при доработках функции уведомления по СМС.                   | 

### <a name="_qmphm5d6rvi3"></a>**Решение**

Диаграмма контекста:  
![](/Task3/ContextC4.png)

Диаграмма контейнеров:  
![](/Task3/ContainerC4.png)


### <a name="_bjrr7veeh80c"></a>**Альтернативы**

На текущий момент получение ставок и согласований персональных предложений синхронное, но заложено использование брокера сообщений kafka.
Миграция интернет-магазина .Net Framework на кроссплатформенную версию .Net Core, сейчас будет ограничение в использовании Linux и средств контейнеризации.

**Недостатки, ограничения, риски**

Подробно опишите здесь недостатки, ограничения и риски выбранного решения.
- Сбои в API Gateway или Kafka могут нарушить взаимодействие сервисов
- Информация о существующих депозитах хранится в старой базе данных АБС.
- АБС масштабируется только вертикально, это может стать узким местом
- Большой объем доработок для MVP. Но переход на микросервисы даст возможность более гибкого развития функционала и масштабирования в будущем.
- Отказ АБС API приведёт к задержкам/остановке в обслуживании клиентов
